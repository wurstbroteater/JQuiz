{% extends "leaderboard/leaderboard_base.html" %}

{% block title %}Overall Leaderboard{% endblock %}

{% block content %}
    <div id="leaderboard">
        <h1>Leaderboard</h1>
        {% for quiz_data in leaderboard_data %}
            <h2>{{ quiz_data.quiz.name }}</h2>
            <table>
                <thead>
                <tr>
                    <th>Rank</th>
                    <th>User</th>
                    <th>Correct</th>
                    <th>Best Score</th>
                    <th>Average Score</th>
                </tr>
                </thead>
                <tbody>
                {% for score in quiz_data.user_scores %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ score.username }}</td>
                        <td>{{ score.correct_turns }}</td>
                        <td>
                            <div class="progress-bar">
                                <div class="progress"
                                     style="width: {{ score.best_score }}%;">{{ score.best_score }}%
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="progress-bar">
                                <div class="progress"
                                     style="width: {{ score.average_score }}%;">{{ score.average_score }}%
                                </div>
                            </div>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="5">No users have completed this quiz yet.</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% endfor %}
    </div>
{% endblock %}
